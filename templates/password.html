{% extends 'base.html' %}
{% block content %}
<div class="row">
  <div class="col-xl-8 col-lg-9 col-12 mx-auto">
    <h2 class="mb-1">Secure Password Generator</h2>
    <p class="text-muted mb-3">Generate strong passwords. Tip: enable symbols for extra entropy.</p>
    <form method="post" class="card card-body mb-3">
      <div class="row g-3 align-items-end">
        <div class="col-md-4">
          <label class="form-label">Length</label>
          <input type="number" min="4" max="128" step="1" name="length" value="16" class="form-control">
        </div>
        <div class="col-md-4">
          <label class="form-label">How many</label>
          <input type="number" min="1" max="10" step="1" name="count" value="1" class="form-control">
        </div>
      </div>
      <div class="row g-3 mt-1">
        <div class="col-md-6">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="upper" id="upper" checked>
            <label class="form-check-label" for="upper">Uppercase A-Z</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="lower" id="lower" checked>
            <label class="form-check-label" for="lower">Lowercase a-z</label>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="digits" id="digits" checked>
            <label class="form-check-label" for="digits">Digits 0-9</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="symbols" id="symbols">
            <label class="form-check-label" for="symbols">Symbols !@#$%^&*_-+=?</label>
          </div>
        </div>
      </div>
      <div class="mt-2">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="avoid_ambiguous" id="avoid_ambiguous" checked>
          <label class="form-check-label" for="avoid_ambiguous">Avoid ambiguous characters (Il1O0 etc.)</label>
        </div>
      </div>
      <div class="mt-3 d-flex gap-2">
        <button class="btn btn-primary" type="submit">Generate</button>
        {% if passwords %}
          <button class="btn btn-outline-secondary" type="button" onclick="cgDownload('passwords.txt', Array.from(document.querySelectorAll('#pw-list code')).map(e=>e.textContent).join('\n'))">Download</button>
        {% endif %}
      </div>
    </form>

    {% if error_message %}
      <div class="alert alert-warning">{{ error_message }}</div>
    {% endif %}

    {% if passwords %}
      <div class="card mt-3" id="pw-list">
        <div class="card-header">Results</div>
        <ul class="list-group list-group-flush">
          {% for p in passwords %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <code class="user-select-all">{{ p }}</code>
              <button class="btn btn-sm btn-outline-secondary" type="button" onclick="cgCopyText('{{ p }}')">Copy</button>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>
  </div>
{% endblock %}


