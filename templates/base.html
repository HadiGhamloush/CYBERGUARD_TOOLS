<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CyberGuard Toolbox</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      :root {
        --cg-shadow: 0 6px 24px rgba(0,0,0,.08);
        --cg-bg: #f8f9fa;
        --cg-surface: #ffffff;
        --cg-border: #e5e7eb;
        --cg-text: #1f2937;
      }
      [data-bs-theme="dark"] {
        --cg-shadow: 0 6px 24px rgba(0,0,0,.35);
        --cg-bg: #0b0f15;
        --cg-surface: #121a24;
        --cg-border: #233041;
        --cg-text: #e2e8f0;
        --bs-body-bg: var(--cg-bg);
        --bs-body-color: var(--cg-text);
      }
      body { background-color: var(--cg-bg); color: var(--cg-text); }
      .theme-toggle { cursor: pointer; }
      .navbar-brand { font-weight: 700; letter-spacing: .2px; }
      .card { border: 1px solid var(--cg-border); background-color: var(--cg-surface); box-shadow: var(--cg-shadow); }
      .card:hover { transform: translateY(-2px); transition: transform .2s ease; }
      .form-control, .form-select { border-radius: .5rem; border-color: var(--cg-border); background-color: var(--cg-surface); color: var(--cg-text); }
      .form-control::placeholder { color: #9aa4b2; }
      [data-bs-theme="dark"] .form-control, [data-bs-theme="dark"] .form-select { background-color: #0f1620; border-color: var(--cg-border); color: var(--cg-text); }
      .table { color: var(--cg-text); }
      .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(0,0,0,0.02); }
      [data-bs-theme="dark"] .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(255,255,255,0.03); }
      .btn { border-radius: .5rem; }
      .hero {
        border-radius: .75rem; background: linear-gradient(135deg, #0b5ed7 0%, #6f42c1 100%);
        color: #fff; box-shadow: var(--cg-shadow);
      }
      [data-bs-theme="dark"] .hero { background: linear-gradient(135deg, #0f1620 0%, #2b3a55 100%); }
      .hero p { opacity: .9; }
      @media (max-width: 576px) { main.container { padding-top: 1rem; } }
    </style>
  </head>
  <body data-bs-theme="light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">CyberGuard</a>
        <div class="d-flex ms-auto align-items-center">
          <button class="btn btn-sm btn-outline-light theme-toggle me-2" id="themeToggle" type="button" title="Toggle theme">🌙</button>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="/password">Password Generator</a></li>
            <li class="nav-item"><a class="nav-link" href="/qr">QR Scanner</a></li>
            <li class="nav-item"><a class="nav-link" href="/exif">EXIF Viewer</a></li>
            <li class="nav-item"><a class="nav-link" href="/port-scanner">Port Scanner</a></li>
            <li class="nav-item"><a class="nav-link" href="/whois">WHOIS / IP Info</a></li>
            <li class="nav-item"><a class="nav-link" href="/stego">Steganography</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container py-4">
      {% block content %}{% endblock %}
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      (function () {
        const root = document.body;
        const key = 'cg-theme';
        const saved = localStorage.getItem(key);
        const isSystemDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const initial = saved || (isSystemDark ? 'dark' : 'light');
        root.setAttribute('data-bs-theme', initial);
        // Sync all toggle buttons
        function syncButtons(mode){
          document.querySelectorAll('.theme-toggle').forEach(btn => { btn.textContent = mode === 'dark' ? '🌙' : '☀️'; });
        }
        syncButtons(initial);
        // Bind click to all
        document.querySelectorAll('.theme-toggle').forEach(btn => {
          btn.addEventListener('click', function(){
            const current = root.getAttribute('data-bs-theme') === 'dark' ? 'dark' : 'light';
            const next = current === 'dark' ? 'light' : 'dark';
            root.setAttribute('data-bs-theme', next);
            localStorage.setItem(key, next);
            syncButtons(next);
          });
        });

        // Utilities for pages
        window.cgCopyText = async function (text) {
          try { await navigator.clipboard.writeText(text); } catch (_) { alert('Copy failed'); }
        };
        window.cgDownload = function (filename, content) {
          const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url; a.download = filename; a.click();
          setTimeout(() => URL.revokeObjectURL(url), 1000);
        };
      })();
    </script>
  </body>
  </html>


